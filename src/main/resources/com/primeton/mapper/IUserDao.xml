<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.primeton.mapper.IUserDao">
	<resultMap id="BaseResultMap" type="com.primeton.pojo.User">
		<id column="USER_ID" property="userId" jdbcType="INTEGER" />
		<result column="USER_NAME" property="userName" jdbcType="VARCHAR" />
		<result column="USER_PASSWORD" property="userPassword"
			jdbcType="VARCHAR" />
		<result column="USER_BIRTHDAY" property="userBirthday"
			jdbcType="DATE" />
		<result column="USER_SEX" property="userSex" jdbcType="VARCHAR" />
		<result column="USER_REMART" property="userRemart" jdbcType="VARCHAR" />
	</resultMap>

	<!-- 登录功能 -->
	<select id="login" resultType="com.primeton.pojo.User">
		select
		USER_ID userId,
		USER_NAME
		userName,
		USER_PASSWORD userPassword,
		USER_BIRTHDAY userBirthday,
		USER_SEX userSex,
		USER_REMART userRemart
		from user where
		USER_NAME=#{userName} and USER_PASSWORD=#{userPassword}
	</select>

	<!-- 根据名字查询用户 -->
	<select id="getUserByName" parameterType="string"
		resultType="com.primeton.pojo.User">
		select
		USER_ID userId,
		USER_NAME userName,
		USER_PASSWORD
		userPassword,
		USER_BIRTHDAY userBirthday,
		USER_SEX userSex,
		USER_REMART
		userRemart
		from user where USER_NAME like '${value}';
	</select>

	<!-- 添加用户 -->
	<insert id="insertUser" parameterType="com.primeton.pojo.User">
		<!-- 使用pojo对象的属性返回主键 -->
		<!-- keyProperty:主键在pojo类中的属性名称 -->
		<!-- resultType:主键的数据类型 -->
		<!-- order:BEFORE:在执行插入之前执行selectKey中的语句 AFTER:在执行插入之后执行selectKey中的语句 -->
		<selectKey keyProperty="userId" resultType="int" order="AFTER">
			select
			last_insert_id()
		</selectKey>
		insert into user (USER_NAME, USER_PASSWORD,
		USER_BIRTHDAY, USER_SEX,
		USER_REMART
		)
		values (#{userName,jdbcType=VARCHAR},
		#{userPassword,jdbcType=VARCHAR},
		#{userBirthday,jdbcType=DATE},
		#{userSex,jdbcType=VARCHAR},
		#{userRemart,jdbcType=VARCHAR}
		)
	</insert>

	<!-- 更新用户 -->
	<insert id="insertSelective" parameterType="com.primeton.pojo.User">
		insert into user
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<!-- <if test="userId != null">
				USER_ID,
			</if> -->
			<if test="userName != null">
				USER_NAME,
			</if>
			<if test="userPassword != null">
				USER_PASSWORD,
			</if>
			<if test="userBirthday != null">
				USER_BIRTHDAY,
			</if>
			<if test="userSex != null">
				USER_SEX,
			</if>
			<if test="userRemart != null">
				USER_REMART,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<!-- <if test="userId != null">
				#{userId,jdbcType=INTEGER},
			</if> -->
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
			</if>
			<if test="userPassword != null">
				#{userPassword,jdbcType=VARCHAR},
			</if>
			<if test="userBirthday != null">
				#{userBirthday,jdbcType=DATE},
			</if>
			<if test="userSex != null">
				#{userSex,jdbcType=VARCHAR},
			</if>
			<if test="userRemart != null">
				#{userRemart,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<!-- 根据主键删除用户 -->
	<delete id="deleteUserById" parameterType="int">
		delete from user where
		USER_ID =#{userId}
	</delete>

	<!-- id:是sql语句的id,paraeterType:参数的类型,resultType:返回值类型 -->
	<select id="getUserById" parameterType="int" resultType="com.primeton.pojo.User">
		select
		USER_ID userId,
		USER_NAME userName,
		USER_PASSWORD userPassword,
		USER_BIRTHDAY userBirthday,
		USER_SEX userSex,
		USER_REMART userRemart
		from user where id = #{userId}
	</select>

	<!-- 更新用户 -->
	<update id="updateUser" parameterType="com.primeton.pojo.User">
		update user set
		USER_NAME=#{userName},USER_PASSWORD=#{userPassword},USER_BIRTHDAY=#{userBirthday},USER_SEX=#{userSex},USER_REMART=#{userRemart}
		where USER_ID=#{userId}
	</update>

</mapper>